import{n as c,_ as y,d as D,o as q,c as F,b as l,w as a,a as i,F as C,k as _,f as E,e as k,x as s,g as p,j as v,E as T,i as N,h as $}from"./index-f95716da.js";import{E as u}from"./index-c8f5a2e9.js";import{E as U}from"./index-17d3fabc.js";const B=e=>c.request({url:"api/teacher/add",method:"post",data:e}),I=()=>c.request({url:"api/teacher/all",method:"get"}),L=e=>c.request({url:"api/teacher/colums",method:"get",params:e}),W=e=>c.request({url:"api/teacher/delete",method:"get",params:e}),z=e=>c.request({url:"api/teacher/edit",method:"post",data:e}),A=e=>c.request({url:"/api/teacher/query",method:"get",params:e}),M=e=>c.request({url:"api/teacher/one",method:"get",params:e}),f={add:B,all:I,getCommunitiesByColums:L,remove:W,update:z,query:A,one:M};const Q=D({data(){return{list:[],teacher:{},dialogFormVisible:!1,queryForm:{id:""},dialogVisible:!1,dialogData:{},formLabelWidth:"80px"}},mounted(){this.fetchData()},methods:{fetchData(){f.all().then(e=>{console.log(e),this.list=e.data.teachers})},handleQuery(){const e=this.queryForm.id,t={id:e};f.one(t).then(r=>{console.log(e),console.log(r.data.teacher),this.dialogData=r.data.teacher,this.dialogVisible=!0}).catch(r=>{console.error(r),u.error("查询失败")})},toAdd(){this.teacher={},this.dialogFormVisible=!0},handleEdit(e){const t={id:e};f.one(t).then(r=>{console.log(r),this.teacher=r.data.teacher,this.dialogFormVisible=!0}).catch(r=>{console.error(r),u.error("获取学校信息失败")})},handleDelete(e){U.confirm("确定要删除该教师信息吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t={id:e};f.remove(t).then(r=>{console.log(r),this.fetchData(),u.success("删除成功")}).catch(r=>{console.error(r),u.error("删除失败")})}).catch(()=>{})},confirm(){this.teacher.id?this.updateTeacher():this.addTeacher()},addTeacher(){f.add(this.teacher).then(e=>{this.dialogFormVisible=!1,this.fetchData(),u.success("添加成功")}).catch(e=>{console.error(e),u.error("添加失败")})},updateTeacher(){f.update(this.teacher).then(e=>{console.log(e),this.dialogFormVisible=!1,this.fetchData(),u.success("修改成功")}).catch(e=>{console.error(e),u.error("修改失败")})}}}),j={class:"footer-container"},S={class:"query-form"},G={class:"root"},H={class:"dialog-footer"},J={class:"table"};function K(e,t,r,O,P,R){const d=v,b=_,m=T,g=E,h=N,n=$,V=k;return q(),F(C,null,[l(g,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=o=>e.dialogVisible=o),title:"查询结果",width:"30%"},{default:a(()=>[l(b,{model:e.dialogData},{default:a(()=>[l(d,{label:"学院"},{default:a(()=>[i("span",null,s(e.dialogData.depart),1)]),_:1}),l(d,{label:"职称"},{default:a(()=>[i("span",null,s(e.dialogData.professional),1)]),_:1}),l(d,{label:"学校编号"},{default:a(()=>[i("span",null,s(e.dialogData.school),1)]),_:1}),l(d,{label:"教师姓名"},{default:a(()=>[i("span",null,s(e.dialogData.teacherName),1)]),_:1}),l(d,{label:"工号"},{default:a(()=>[i("span",null,s(e.dialogData.teacherNo),1)]),_:1}),l(d,{label:"创建时间"},{default:a(()=>[i("span",null,s(e.dialogData.createTime),1)]),_:1}),l(d,{label:"更新时间"},{default:a(()=>[i("span",null,s(e.dialogData.updateTime),1)]),_:1}),l(d,{label:"用户编号"},{default:a(()=>[i("span",null,s(e.dialogData.userId),1)]),_:1})]),_:1},8,["model"]),i("div",j,[l(m,{onClick:t[0]||(t[0]=o=>e.dialogVisible=!1)},{default:a(()=>[p("关闭")]),_:1})])]),_:1},8,["modelValue"]),i("div",S,[l(b,{model:e.queryForm,inline:""},{default:a(()=>[l(d,{label:""},{default:a(()=>[l(h,{modelValue:e.queryForm.id,"onUpdate:modelValue":t[2]||(t[2]=o=>e.queryForm.id=o),placeholder:"请输入id",clearable:""},null,8,["modelValue"])]),_:1}),l(d,null,{default:a(()=>[l(m,{type:"primary",onClick:e.handleQuery},{default:a(()=>[p("查询")]),_:1},8,["onClick"]),l(m,{type:"primary",onClick:e.toAdd},{default:a(()=>[p("添加")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),i("div",G,[l(g,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[11]||(t[11]=o=>e.dialogFormVisible=o),title:"教师信息"},{footer:a(()=>[i("span",H,[l(m,{onClick:t[9]||(t[9]=o=>e.dialogFormVisible=!1)},{default:a(()=>[p("取消")]),_:1}),l(m,{type:"primary",onClick:t[10]||(t[10]=o=>e.confirm())},{default:a(()=>[p("确定")]),_:1})])]),default:a(()=>[l(b,{model:e.teacher},{default:a(()=>[l(d,{label:"学院","label-width":e.formLabelWidth},{default:a(()=>[l(h,{modelValue:e.teacher.depart,"onUpdate:modelValue":t[3]||(t[3]=o=>e.teacher.depart=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"职称","label-width":e.formLabelWidth},{default:a(()=>[l(h,{modelValue:e.teacher.professional,"onUpdate:modelValue":t[4]||(t[4]=o=>e.teacher.professional=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"学校编号","label-width":e.formLabelWidth},{default:a(()=>[l(h,{modelValue:e.teacher.school,"onUpdate:modelValue":t[5]||(t[5]=o=>e.teacher.school=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"教师姓名","label-width":e.formLabelWidth},{default:a(()=>[l(h,{modelValue:e.teacher.teacherName,"onUpdate:modelValue":t[6]||(t[6]=o=>e.teacher.teacherName=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"工号","label-width":e.formLabelWidth},{default:a(()=>[l(h,{modelValue:e.teacher.teacherNo,"onUpdate:modelValue":t[7]||(t[7]=o=>e.teacher.teacherNo=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"用户编号","label-width":e.formLabelWidth},{default:a(()=>[l(h,{modelValue:e.teacher.userId,"onUpdate:modelValue":t[8]||(t[8]=o=>e.teacher.userId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),i("div",J,[l(V,{data:e.list,style:{width:"100%"}},{default:a(()=>[l(n,{fixed:"",prop:"id",label:"id",width:"80",align:"center"}),l(n,{prop:"depart",label:"学院",width:"80",align:"center"}),l(n,{prop:"professional",label:"职称",width:"80",align:"center"}),l(n,{prop:"school",label:"学校编号",width:"80",align:"center"}),l(n,{prop:"teacherName",label:"教师姓名",width:"80",align:"center"}),l(n,{prop:"teacherNo",label:"工号",width:"80",align:"center"}),l(n,{prop:"createTime",label:"创建时间",width:"80",align:"center"}),l(n,{prop:"updateTime",label:"更新时间",width:"80",align:"center"}),l(n,{prop:"userId",label:"用户编号",width:"150",align:"center"}),l(n,{fixed:"right",label:"操作",width:"150",align:"center"},{default:a(o=>[l(m,{type:"info",size:"small",onClick:w=>e.handleEdit(o.row.id)},{default:a(()=>[p("修改")]),_:2},1032,["onClick"]),l(m,{type:"danger",size:"small",onClick:w=>e.handleDelete(o.row.id)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])],64)}const x=y(Q,[["render",K],["__scopeId","data-v-7c79d946"]]);export{x as default};
