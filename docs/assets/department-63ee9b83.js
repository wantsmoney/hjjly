import{ac as y,n as m,_ as k,d as R,o as I,c as D,a as h,b as a,w as o,E,e as T,f as U,g as n,h as L,i as W,j as P,k as v}from"./index-5eed4e3f.js";import{c as A,E as F}from"./el-select-072a8529.js";import{E as p}from"./index-182310f0.js";const N=e=>m.request({url:"/api/department/page",method:"post",data:e}),$=e=>m.request({url:"/api/department/delete",method:"get",params:e}),q=e=>{if(typeof e!="object")throw new TypeError("参数必须是一个对象");return m.request({url:"/api/department/one/"+e.id,method:"get",params:e})},z=e=>m.request({url:"/api/department/add",method:"post",data:e}),B=e=>m.request({url:"/api/department/edit",method:"post",data:e}),V=y.create({baseURL:"http://api.jqrjq.cn",withCredentials:!0});V.interceptors.request.use(e=>e,e=>Promise.reject(e));V.interceptors.response.use(e=>e,e=>Promise.reject(e));const j=R({data(){return{adCates:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,adCate:{departName:"",id:0,departCode:"",departDesc:"",schoolId:"",departType:""},formLabelWidth:"80px",searchDialogVisible:!1,searchId:"",searchResult:{},searchResultVisible:!1}},mounted(){this.getAdCatesPage(1)},methods:{toEdit(e){this.dialogFormVisible=!0,this.adCate=A(e)},getAdCatesPage(e){N({current:e,size:5}).then(r=>{const f=r.data.page;this.adCates=f.records,this.page=f}).catch(r=>{console.log(r)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},del(e){$({id:e}).then(r=>{if(r.success)this.getAdCatesPage(this.page.current);else return console.log(r.msg),!1}).catch(r=>{console.log(r)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},toAdd(){this.adCate={departName:"",id:0,departCode:"",departDesc:"",schoolId:"",departType:""},this.dialogFormVisible=!0},save(){const e=this.adCate;e.id==0?z(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),p.success(l.msg);else return p.error(l.msg),!1}).catch(l=>{p.error("网络错误，请联系管理员")}):B(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),p.success(l.msg);else return p.error(l.msg),!1}).catch(l=>{p.error("网络错误，请联系管理员")})},openSearchDialog(){this.searchDialogVisible=!0,this.searchId="",this.searchResult=null},searchById(){q({id:this.searchId}).then(e=>{console.log(e.data),this.searchResult=e.data.department,this.searchResultVisible=!0,console.log(e.data)}).catch(e=>{console.log(e)})}}}),S={class:"adCates"},M={class:"adcate-tools"},G={class:"dialog-footer"},H={class:"dialog-footer"},J={class:"dialog-footer"};function K(e,l,r,f,O,Q){const i=E,u=L,c=T,C=F,d=W,s=P,b=v,g=U;return I(),D("div",S,[h("div",M,[a(i,{type:"primary",onClick:e.toAdd},{default:o(()=>[n("添加")]),_:1},8,["onClick"]),a(i,{type:"primary",onClick:e.openSearchDialog},{default:o(()=>[n("查询")]),_:1},8,["onClick"])]),a(c,{data:e.adCates,style:{width:"100%"}},{default:o(()=>[a(u,{fixed:"",prop:"id",label:"id",width:"50"}),a(u,{prop:"departName",label:"部门名称"}),a(u,{prop:"departCode",label:"部门英文"}),a(u,{prop:"departDesc",label:"部门描述"}),a(u,{prop:"schoolId",label:"学校id"}),a(u,{prop:"departType",label:"学院类型"}),a(u,{fixed:"right",label:"操作",width:"120"},{default:o(({row:t})=>[a(i,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(t)},{default:o(()=>[n("修改")]),_:2},1032,["onClick"]),a(i,{link:"",type:"primary",size:"small",onClick:w=>e.del(t.id)},{default:o(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(C,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"]),a(g,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=t=>e.dialogFormVisible=t),title:"插入信息"},{footer:o(()=>[h("span",G,[a(i,{onClick:l[5]||(l[5]=t=>e.dialogFormVisible=!1)},{default:o(()=>[n("Cancel")]),_:1}),a(i,{type:"primary",onClick:e.save},{default:o(()=>[n("保存")]),_:1},8,["onClick"])])]),default:o(()=>[a(b,{model:e.adCate},{default:o(()=>[a(s,{label:"部门名称","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.adCate.departName,"onUpdate:modelValue":l[0]||(l[0]=t=>e.adCate.departName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"部门英文","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.adCate.departCode,"onUpdate:modelValue":l[1]||(l[1]=t=>e.adCate.departCode=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"部门描述","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.adCate.departDesc,"onUpdate:modelValue":l[2]||(l[2]=t=>e.adCate.departDesc=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"学校id","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.adCate.schoolId,"onUpdate:modelValue":l[3]||(l[3]=t=>e.adCate.schoolId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"学院类型","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.adCate.departType,"onUpdate:modelValue":l[4]||(l[4]=t=>e.adCate.departType=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(g,{modelValue:e.searchDialogVisible,"onUpdate:modelValue":l[9]||(l[9]=t=>e.searchDialogVisible=t),title:"查询"},{footer:o(()=>[h("span",H,[a(i,{onClick:l[8]||(l[8]=t=>e.searchDialogVisible=!1)},{default:o(()=>[n("取消")]),_:1}),a(i,{type:"primary",onClick:e.searchById},{default:o(()=>[n("查询")]),_:1},8,["onClick"])])]),default:o(()=>[a(b,null,{default:o(()=>[a(s,{label:"ID","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.searchId,"onUpdate:modelValue":l[7]||(l[7]=t=>e.searchId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1})]),_:1},8,["modelValue"]),a(g,{modelValue:e.searchResultVisible,"onUpdate:modelValue":l[16]||(l[16]=t=>e.searchResultVisible=t),title:"查询结果"},{footer:o(()=>[h("span",J,[a(i,{onClick:l[15]||(l[15]=t=>e.searchResultVisible=!1)},{default:o(()=>[n("关闭")]),_:1})])]),default:o(()=>[a(b,{model:e.searchResult},{default:o(()=>[a(s,{label:"部门名称","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.searchResult.departName,"onUpdate:modelValue":l[10]||(l[10]=t=>e.searchResult.departName=t),autocomplete:"on",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"部门英文","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.searchResult.departCode,"onUpdate:modelValue":l[11]||(l[11]=t=>e.searchResult.departCode=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"部门描述","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.searchResult.departDesc,"onUpdate:modelValue":l[12]||(l[12]=t=>e.searchResult.departDesc=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"学校id","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.searchResult.schoolId,"onUpdate:modelValue":l[13]||(l[13]=t=>e.searchResult.schoolId=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"学院类型","label-width":e.formLabelWidth},{default:o(()=>[a(d,{modelValue:e.searchResult.departType,"onUpdate:modelValue":l[14]||(l[14]=t=>e.searchResult.departType=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const _=k(j,[["render",K]]);export{_ as default};
